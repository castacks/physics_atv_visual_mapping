models_dir: /home/tartandriver/workspace/models #necessary to include this for non-ROS offline proc

image:
    image_topic: /multisense/left/image_rect_color
    camera_info_topic: /multisense/left/camera_info
    image_compressed: False

pointcloud:
    topic: /superodometry/velodyne_cloud_registered
#    topic: /coloroze_pcl_node/colorized_pcl

odometry:
    topic: /superodometry/integrated_to_init

gridmap:
    topic: local_gridmap

#the base link of the vehicle (e.g. base_link, vehicle, etc.)
vehicle_frame: vehicle 

#camera intrinsics
intrinsics:
    K: [455.7750, 0., 497.1180, 0., 456.3191, 251.8580, 0., 0., 1.]
    P: [455.7750, 0., 497.1180, 0., 456.3191, 251.8580, 0., 0., 1.]

#transform from the vehicle link to the camera link
extrinsics:
#    p: [0.0, 0.0, -0.1274]
#    q: [-0.549, 0.554, -0.445, -0.440] #xyzw

    p: [0.0, 0.4, -0.3]
    q: [0.569, -0.549, 0.416, 0.450] #xyzw

image_processing:
    # -
    #     type: radio
    #     args:
    #         radio_type: radio_v2.5-b # radio_v2 e-radio_v2
    #         image_insize: [672, 352]  # Original Image Size must be divisible by 16

    # - 
    #     type: pca
    #     args:
    #         fp: physics_atv_visual_mapping/pca/radio_v2.5-b_64_renegade_ridge.pt


    -
        type: dino
        args:
            dino_type: dinov2_vitb14
            dino_layer: 10
            image_insize: [686, 364] #this should be the size of the input images
            desc_facet: value
    - 
        type: pca
        args:
            # fp: physics_atv_visual_mapping/pca/dino_vitb_10_renegade_ridge.pt
            fp: physics_atv_visual_mapping/pca/pca_vitb10_value.pt


    # -
    #     type: sam
    #     args:
    #         image_insize: [686, 364] #this should be the size of the input images
    #         sam_path: segment_anything_models/sam_vit_b_01ec64.pth
    #         sam_type: vit_b #one of [vit_b]

    # -
    #     type: pca
    #     args:
    #         fp: physics_atv_visual_mapping/pca/sam_renegade_ridge.pt

# voxel
localmapping:
    mapper_type: voxel
    layer_key: radio
    ema: 0.5 #higher->use recent more
    n_features: 16
    metadata:
        origin: [-60., -60., -30.]
        length: [120., 120., 60.]
        resolution: [0.25, 0.25, 0.25]

# #BEV
# localmapping:
#     mapper_type: bev
#     layer_key: radio
#     ema: 0.1 #higher->use recent more
#     n_features: 16
#     metadata:
#         origin: [-40., -40.]
#         length: [80., 80.]
#         resolution: [0.25, 0.25]

device: cuda
#viz: True
viz: False